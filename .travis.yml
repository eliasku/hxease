sudo: required
dist: trusty

language: haxe

os:
  - linux
  - osx



haxe:
  - "3.2.1"
  - development

branches:
  only:
    - develop

env:
    matrix:
    - TARGET=interp
    - TARGET=neko
    - TARGET=cpp
    - TARGET=cs
    - TARGET=java
    - TARGET=flash
    - TARGET=js
    - TARGET=node
    - TARGET=php
    - TARGET=python
#    - TARGET=lua

matrix:
  include:
    - os: osx
      osx_image: xcode7.2
  allow_failures:
    - haxe: development

install:
  - haxelib dev hxease .
  - haxelib git hxmake https://github.com/eliasku/hxmake.git

script:
  - haxelib run hxmake test --override-test-target=${TARGET}